<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://www.nightwolf.in/nightwolf-cotribution/performance/">
        <link rel="shortcut icon" href="../../img/favi.png">
        
        <title>Linux-Performance - nightWolf</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-220186946-1', 'nightwolf.in');
            ga('send', 'pageview');
        </script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
                <a class="navbar-brand" href="../..">nightWolf</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="navitem active">
                                <a href="./" class="nav-link">Linux-Performance</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Interview-Prep <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Linux Interview Questions</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../linux_basic/" class="dropdown-item">Linux Interview Questions for Freshers</a>
</li>
            
<li>
    <a href="../linux_interview_questions_for_freshers/" class="dropdown-item">Linux Interview Questions for Freshers - 2</a>
</li>
            
<li>
    <a href="../linux_L1/" class="dropdown-item">Linux Interview Questions for Freshers and Experienced - L1</a>
</li>
            
<li>
    <a href="../linux_L2/" class="dropdown-item">Linux Interview Questions for Experienced Linux Admins - L2</a>
</li>
            
<li>
    <a href="../linux_L3/" class="dropdown-item">Advanced Linux Interview Questions for Experienced Admins - L3</a>
</li>
            
<li>
    <a href="../linux_questionairs/" class="dropdown-item">Solved list of Linux interview Questions</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="../shell_scripting_interview_questions/" class="dropdown-item">Shell-Scripting Interview Questions</a>
</li>
                                    
<li>
    <a href="../network/" class="dropdown-item">OS Networking Interview Questions</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">DevOps Interview Questions</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../devops_interview_questions/" class="dropdown-item">DevOps Interview Questions for Freshers and Experienced</a>
</li>
            
<li>
    <a href="../devops_interview_questions-2/" class="dropdown-item">DevOps Interview Questions for Freshers and Experienced-2</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="../git/" class="dropdown-item">GIT Interview Questions</a>
</li>
                                    
<li>
    <a href="../jenkins/" class="dropdown-item">Jenkins Interview Questions</a>
</li>
                                    
<li>
    <a href="../docker_interview_questions/" class="dropdown-item">Docker Interview Questions</a>
</li>
                                    
<li>
    <a href="../kubernetes_interview_questions/" class="dropdown-item">Kubernetes Interview Questions</a>
</li>
                                    
<li>
    <a href="../ansible_interview_questions/" class="dropdown-item">Ansible Interview Questions</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Java/OOPs Interview Questions</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../java_interview_questions/" class="dropdown-item">Java/OOPs Interview Questions</a>
</li>
            
<li>
    <a href="../java_interview_questions-2/" class="dropdown-item">Java/OOPs Interview Questions-2</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Terraform Interview Questions</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../terraform_interview_question/" class="dropdown-item">Terraform Interview Questions and Answers- 1st</a>
</li>
            
<li>
    <a href="../terraform_interview_question-2/" class="dropdown-item">Terraform Interview Questions and Answers- 2nd</a>
</li>
            
<li>
    <a href="../terraform_interview_question-3/" class="dropdown-item">Terraform Interview Questions and Answers- 3rd</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">AWS Interview Questions</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../aws/" class="dropdown-item">AWS Certified SysOps Administrator Questions- 1st</a>
</li>
            
<li>
    <a href="../aws-2/" class="dropdown-item">AWS Certified SysOps Administrator Questions- 2nd</a>
</li>
            
<li>
    <a href="../aws-3/" class="dropdown-item">AWS Interview Questions- 1st</a>
</li>
            
<li>
    <a href="../aws-4/" class="dropdown-item">AWS Interview Questions- 2nd</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="../manual_testing_interview_questions/" class="dropdown-item">Manual Testing/QA Interview Questions</a>
</li>
                                    
<li>
    <a href="../dbms_interview_questions/" class="dropdown-item">DBMS Interview Questions and Answers</a>
</li>
                                    
<li>
    <a href="../azure.pdf" class="dropdown-item">Azure Interview Questions</a>
</li>
                                    
<li>
    <a href="../managerial_interview_questions/" class="dropdown-item">Managerial Interview Questions</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Cheatsheets <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../kubernetes_cheatsheet/" class="dropdown-item">Kubernetes CheatSheet</a>
</li>
                                    
<li>
    <a href="../git_cheatsheet/" class="dropdown-item">GIT CheatSheet</a>
</li>
                                    
<li>
    <a href="../yum_cheatsheet.pdf" class="dropdown-item">Linux YUM CheatSheet</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Technical <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../linux/" class="dropdown-item">Linux</a>
</li>
                                    
<li>
    <a href="../../network/" class="dropdown-item">Network</a>
</li>
                                    
<li>
    <a href="../../db/" class="dropdown-item">Database</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Services <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="https://www.linkedin.com/groups/8982092/" class="dropdown-item">Jobs for you</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../.." class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../linux_basic/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#linux-system-performance-troubleshooting" class="nav-link">Linux System Performance Troubleshooting</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#tools-helpful-in-your-investigation" class="nav-link">Tools helpful in your investigation:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#troubleshooting-linux-perfomance-isssue-happening-due-to-high-cpu-usage" class="nav-link">Troubleshooting Linux perfomance isssue happening due to high CPU Usage</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#troubleshooting-linux-performance-issue-happening-due-to-high-memory-usage" class="nav-link">Troubleshooting Linux performance issue happening due to high Memory Usage</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#troubleshooting-linux-performance-issue-happening-due-to-high-disk-io-usage" class="nav-link">Troubleshooting Linux performance issue happening due to high Disk IO Usage</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#troubleshooting-linux-os-network-performance-issues" class="nav-link">Troubleshooting Linux OS network performance Issues</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="linux-system-performance-troubleshooting">Linux System Performance Troubleshooting<a class="headerlink" href="#linux-system-performance-troubleshooting" title="Permanent link"></a></h1>
<ul>
<li>
<p><code>Definition:</code>
  System performance is a measure of the amount of useful work done by a System in a time range. </p>
</li>
<li>
<p><code>OS/CPU Load:</code> The average amount of processes using or waiting for CPU allocation over a period of time.</p>
</li>
</ul>
<p>Usually System Performance issues can be identified by observing slowness in services offered by OS and it mostly happen due to any of the below reasons. </p>
<pre><code>    - high CPU Usage 
    - high Memory Usage
    - high Disk IO Usage
    - Network Performance Issues
    - Software Bugs like memory leaks, Kernel bugs etc.
</code></pre>
<p>We will try to break your investigation steps into major bullet points and helps you to find the root causes of the issue. </p>
<h1 id="tools-helpful-in-your-investigation">Tools helpful in your investigation:<a class="headerlink" href="#tools-helpful-in-your-investigation" title="Permanent link"></a></h1>
<p>Below listed tools are Linux performance monitoring tools, which will help you find out the root cause of the issue,</p>
<p><img alt="!image" src="../../img/TroubleShooting.jpg" /></p>
<ul>
<li><a href="https://linux.die.net/man/1/top" target="_blank">top</a></li>
<li><a href="https://linux.die.net/man/1/mpstat" target="_blank">mpstat</a></li>
<li><a href="https://linux.die.net/man/1/sar" target="_blank">sar</a></li>
<li><a href="https://linux.die.net/man/1/free" target="_blank">free</a></li>
<li><a href="https://linux.die.net/man/1/strace" target="_blank">strace</a></li>
<li><a href="https://linux.die.net/man/1/iotop" target="_blank">iotop</a></li>
<li><a href="https://www.thegeekstuff.com/2011/07/iostat-vmstat-mpstat-examples/" target="_blank">iostat</a></li>
<li><a href="https://tldp.org/LDP/nag2/x-087-2-iface.netstat.html" target="_blank">netstat</a></li>
<li><a href="https://www.thegeekstuff.com/2014/11/pidstat-examples/" target="_blank">pidstat</a></li>
<li><a href="https://www.thegeekstuff.com/2011/07/iostat-vmstat-mpstat-examples/" target="_blank">vmstat</a></li>
<li><a href="https://www.tcpdump.org/manpages/tcpdump.1.html" target="_blank">tcpdump</a></li>
<li><a href="http://iptraf.seul.org/about.html" target="_blank">iptraf</a></li>
<li><a href="https://git.kernel.org/pub/scm/linux/kernel/git/axboe/blktrace.git/tree/README" target="_blank">blktrace</a></li>
<li><a href="https://www.tecmint.com/10-lsof-command-examples-in-linux/" target="_blank">lsof</a></li>
<li>
<p><a href="https://www.networkworld.com/article/3633889/looking-at-your-linux-systems-network-interface-with-ethtool.html" target="_blank">ethtool</a></p>
</li>
<li>
<p><a href="https://github.com/v-nightwolf/nightwolf-cotribution/raw/4fc6bb408de57e9776d2d041e5573990928fbecc/TypeClip%20-%201.0.5933.22582.exe">type-clip</a> : A very good tool when you have to paste something into virtual consoles. </p>
</li>
<li><a href="https://github.com/rackerlabs/recap#installation" target="_blank">recap</a> : To capture historic stats of a server. This tool is almost harmless and captures a lot of information. You can add this tool to your default package list in your environment.
<br></li>
</ul>
<p>You can install these tools  very easily using below command:</p>
<p><code>yum install -y  lsof sysstat iptraf tcpdump procps-ng net-tools strace iotop ethtool blktrace</code></p>
<p><br></p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5000366982270064"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5000366982270064"
     data-ad-slot="4236115489"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h4 id="you-can-start-your-investigation-by-executing-small-script-which-will-gather-a-lot-of-system-stats-for-you">You can start your investigation by executing small script, which will gather a lot of system stats for you:<a class="headerlink" href="#you-can-start-your-investigation-by-executing-small-script-which-will-gather-a-lot-of-system-stats-for-you" title="Permanent link"></a></h4>
<pre><code>bash &lt;(curl -s https://raw.githubusercontent.com/v-nightwolf/nightwolf-cotribution/main/server_stats.sh)
</code></pre>
<p>The output of above script will look like this: </p>
<pre><code>############################################

Server Uptime: 1days 6:43:23

Load Average: Current 0.26
Load Average: 15min Average 0.26

#### Printing CPU stats: ####
01:15:26 PM  CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest  %gnice   %idle
01:15:26 PM  all    1.47    0.00    0.48    0.02    0.00    0.12    0.00    0.00    0.00   97.91


###RAM usage###
Free Ram: 569.93MB
Used RAM: 3171.23MB

15% ram left
RAM ALERT: Low!

TOP RAM CONSUMER: /opt/mongodb/mms/jdk/bin/mms-app
RAM Usage (RSS): 1857.43 MB
Total Number of RAM Processes: 2
Total RAM Usage for all /opt/mongodb/mms/jdk/bin/mms-app processes =  2287.56 MB
61.15% used by /opt/mongodb/mms/jdk/bin/mms-app


###CPU usage###
Top Process:  /opt/mongodb/mms/jdk/bin/mms-app
CPU % for SINGLE Top Process =  4.2
number of processes this is running: 2
Total CPU % for /opt/mongodb/mms/jdk/bin/mms-app =  4.8

############################################
</code></pre>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5000366982270064"
     crossorigin="anonymous"></script>
<!-- horizontal -->
<p><ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-5000366982270064"
     data-ad-slot="5166053770"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h1 id="troubleshooting-linux-perfomance-isssue-happening-due-to-high-cpu-usage">Troubleshooting Linux perfomance isssue happening due to high CPU Usage<a class="headerlink" href="#troubleshooting-linux-perfomance-isssue-happening-due-to-high-cpu-usage" title="Permanent link"></a></h1>
<p>Every performance issue troubleshooting should starts with <code>top</code> command:</p>
<p>and the most useful output of <code>top</code> command is: </p>
<pre><code>top - 16:18:32 up  2:52,  1 user,  load average: 0.09, 0.20, 0.22
Tasks:  99 total,   1 running,  98 sleeping,   0 stopped,   0 zombie
%Cpu(s):  3.2 us,  0.0 sy,  0.0 ni, 96.8 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem :  2889532 total,    73328 free,  2707940 used,   108264 buff/cache
KiB Swap:  2097148 total,  1206268 free,   890880 used.    48052 avail Mem
</code></pre>
<hr />
<pre><code>a). 1st line contains: UPTIME and LOAD Averages
       current time and length of time since last boot
       total number of users logged in.
       system load avg over the last 1, 5 and 15 minutes
</code></pre>
<hr />
<pre><code>b). 2nd line contains: TASKs
    This line shows total tasks or threads, depending on the state of the Threads-mode toggle.  
    That total is further classified as: running; sleeping; stopped; zombie
</code></pre>
<hr />
<pre><code>c). 3rd line contains CPU state percentages: This will guide your investigation into a specific direction.

    As a default, percentages for these individual categories are displayed.
       us, user    : time running un-niced user processes
       sy, system  : time running kernel processes
       ni, nice    : time running niced user processes
       id, idle    : time spent in the kernel idle handler
       wa, IO-wait : time waiting for I/O completion
       hi : time spent servicing hardware interrupts
       si : time spent servicing software interrupts
       st : time stolen from this vm by the hypervisor
</code></pre>
<hr />
<pre><code>Above stats might guide your investigation into a specific direction. Depending on above CPU stats, you will be able to decide what to check next.

* If only "%us"(time running un-niced user processes) is high that means your application is consuming more
  CPU. Now you should deep dive into process stats and process trace. We will discuss this in more detail soon.

* If only "%sy"(time running kernel processes) is high that means you kernel level system call are consuming
  the CPU. This usually happens when there is a bug in kernel packages.

* If "%ni"(time running niced user processes) is high that means the  prioritized processes are consuming
  the CPU. You should try to depriritize the process.

* If "%id"(time spent in the kernel idle handler) is high that means your system is ideal and is not doing
  anything.

* If "%wa"(time waiting for I/O completion) is high that means your most CPU time is being spent on waiting for
  I/O completion. These waits can be due to Disk slowness or Network slowness.

* If "%hi"(time spent servicing hardware interrupts) is high that means CPU is very busy in servicing the 
  Hardware interrupts. Hardware interrupt will cause CPU to stop its current processing and go handle the 
  Hardware interrupt. Ususally hardware interrupts was generated by physical devices like disk, NIC,computer
  peripherals. You should check the hardwares attached to the machine and see if they are working fine.

* If "%si"(time spent servicing software interrupts) is high that CPU is busy serving Software interrupts.
  Usually Software interrupt occure at kernel level.

* "%st"(time stolen from this vm by the hypervisor) means that virtual CPU is being spent waiting for the 
  Hypervisor to allocate CPU to virtual machine. This stat is only applicable to Virtual machines.
</code></pre>
<p><br></p>
<p>If %us is high, that mean some process in user space is consuming the CPU. Next step would be to deep dive into
    process stats: </p>
<pre><code>1. First identify the process consuming high CPU. This can be identified using "top" command.

2. Once you have identified the process, note down its process id(pid).

3. Try tracing the process using stace command. This will throw a lot output onto the screen. 
   starce -t -p PID_OF_PROCESS  =&gt; This will print wall clock time of each system call.

4. Please check if process is getting stuck at any system call and note down system call and the resource system 
   call is using.

5. If system call is waiting for a File related I/O, then next step is to check file system call is waiting for.

6. Go to /proc/{$PID_OF_PROCESS}/
</code></pre>
<p><br></p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5000366982270064"
     crossorigin="anonymous"></script>
<!-- horizontal -->
<p><ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-5000366982270064"
     data-ad-slot="5166053770"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p><br></p>
<h1 id="troubleshooting-linux-performance-issue-happening-due-to-high-memory-usage">Troubleshooting Linux performance issue happening due to high Memory Usage<a class="headerlink" href="#troubleshooting-linux-performance-issue-happening-due-to-high-memory-usage" title="Permanent link"></a></h1>
<pre><code>d). 4th and 5th line in 'top' output contains Memory stats in Kibibytes(kib).
    There is slight difference between kilibyte and kibibyte i.e 1 kB = 1000 bytes. 1 KiB = 1024 bytes.

    As a default, line 4 reflects physical memory, classified as:
       total, free, used and buff/cache

    line 5 reflects mostly virtual memory(swap), classified as:
       total, free, used and avail

    total: Total size of memory available to system.

    free: Size of memory which in un-utilized.

    used: Size of memory currently utilized by processes+System.

    buff/cache: Size of memory utilized by system for kernel buffers(i.e. buff) and page cache and slabs(i.e. cache)
</code></pre>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5000366982270064"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5000366982270064"
     data-ad-slot="4236115489"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="high-memory-utilization">High memory utilization<a class="headerlink" href="#high-memory-utilization" title="Permanent link"></a></h3>
<pre><code>  Excessive memory use on the system can lead to poor performance due to systems need to move data between
  the RAM memory and swap storage, memory must be cleared to make room for new allocations, or there is little
  space available for caching data from the file system. Below is sample output from free command.


    # free
                     total        used        free      shared  buff/cache   available
      Mem:        32877556     3236036    20996296       11316     8645224    29120756
      Swap:        1953788        5888     1947900


    1. Total Mem: Total amount of memory allocated to the server.
    2. Used Mem: Total amount of memory currently being utilized by system and applications.
    3. Free Mem: Memory amount currently free on system.
    4. Shared Mem: Amount of memory  used by tmpfs and  shared memory betweendifferent processes. 
    5. buff/cache Mem: Memory used by OS buffer and caching, which is dropped by OS when new memory request comes. 
    6. Available Mem: Free Mem + buff/cahce Mem.

  Linux support virtual memory, which allows applications to use more memory than physical RAM installed on
  the machine. Linux will use the swap partitions to store the data that is not currently being used and
  automatically move data between RAM memory and disk drives as required. However, it is very slow to move
  data between physical RAM and disk.
</code></pre>
<h5 id="what-is-swap">what is Swap?<a class="headerlink" href="#what-is-swap" title="Permanent link"></a></h5>
<pre><code>  The primary function of Swap space is to utilize disk space from a separate, dedicated partition on the main
  storage for RAM when the physical main memory fills up and more space is needed.
</code></pre>
<h5 id="what-is-vmswappiness">What is vm.swappiness<a class="headerlink" href="#what-is-vmswappiness" title="Permanent link"></a></h5>
<pre><code>  vm.swappiness is a value which helps OS to decide when to start using swap. The default value of vm.swappiness
  is 60. vm.swappiness represents the percentage of the free memory before activating swap. The lower the value
  of vm.swappiness, the less swapping is used and the more memory pages are kept in physical memory.

  In simpler words, the value of /proc/sys/vm/swappiness dictates how 'aggressively' the Linux kernel will swap
  memory pages [during memory reclaim].

  The 'swappiness' value can be between 0 and 100.

  For high Memory centric applications like Databases, Please try to keep the vm.swappiness as low as possible,
  somewhere between 5 to 10.

  A value of 0 does not prevent swap. In fact, the kernel will initiate swap when the amount of free and
  file-backed pages is less than the high water mark in a zone irrespective of the swappiness value.

  If no swap area(s) exists then swappiness is not applicable.
</code></pre>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5000366982270064"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5000366982270064"
     data-ad-slot="4236115489"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h3 id="main-memory-architecture">Main Memory Architecture:<a class="headerlink" href="#main-memory-architecture" title="Permanent link"></a></h3>
<pre><code> - To expand on main memory, Memory is divided into small-small chunks of memory called Memory Pages. The default
   size of memory pages on most processors is 4KB, and although some processors use 8KB, 16KB, or 64KB as the
   default page size.

    =&gt;  Fixed size block in RAM (Physical Address Space)  -  Frame
    =&gt;  Fixed size block created by CPU (Logical Address Space) - Page

 - Main memory is divided by two general categories: Page Cache, where the kernel stores page-sized chunks of
   files for faster loading; and Anonymous Memory, which is mainly comprised from content not backed by storage,
   such as program stack and temporary variables.

 - The kernel uses a memory management program that detects blocks (AKA: pages) of anonymous memory, in which
   the contents have not been used recently. The memory management program swaps out enough of these relatively
   infrequently used pages of anonymous memory to a special partition on the main storage specifically designated
   for paging or swapping. This frees up RAM and makes room for more data.

 - Those pages of anonymous memory that were swapped out to the Swap partition are tracked by the kernel memory
   management code and can be paged back into RAM if they are needed (AKA: Swapped-in).

  =&gt;  PAGE TABLE: A table that has mapping of addresses in RAM of pages and a validation bit which tells either
      the page is present on that address or not.
</code></pre>
<h3 id="linux-memory-management">Linux memory management:<a class="headerlink" href="#linux-memory-management" title="Permanent link"></a></h3>
<pre><code> - When a process in Memory tries to access a file, the Memory Management program check if that File already
   exists in Memory and what memory pages are mapped to the requested file. For Page faults are raised.
</code></pre>
<h5 id="what-are-page-faults">What are Page Faults:<a class="headerlink" href="#what-are-page-faults" title="Permanent link"></a></h5>
<pre><code>    It is a condition when a process in execution can not find memory pages for a file in Virtual memory space.
</code></pre>
<h5 id="what-are-major-page-faults">What are Major page faults ?<a class="headerlink" href="#what-are-major-page-faults" title="Permanent link"></a></h5>
<pre><code>   * If page mapping for requested file is not found in Virtual Memory space, a "Major page Fault" is raised.
     This means requested file needs to be bring into memory from either disk or Swap. Bringing file to memory
     from Disk or Swap is costs heavy penalty in terms of cpu cycles occurred due to swap-in, swap-out.

      =&gt; "SWAP-IN":  It is a mthod of moving a file/pages from Swap to main Memory.
      =&gt; "SWAP-OUT": It is a method of moving file/pages from Memory to Swap.

    Major page faults, Swap-IN and Swap-OUT are cpu cycle costly processes. If there is high swap-in and swap-out
    happening on a server/machine, which clearly means OS is mostly busy in just moving the files/pages around
    instead of actually serving the actual proccesses. This will degrade the system performance.
</code></pre>
<h5 id="what-are-minor-page-faults">What are Minor page faults ?<a class="headerlink" href="#what-are-minor-page-faults" title="Permanent link"></a></h5>
<pre><code>   * If requested file page mapping is found in Virtual memory, but pages are mapped/used by some other process,
     a "Minor page fault" will be raised. Linux OS then will mark those pages as shared and will allow both old
     and new processes to share those pages.
</code></pre>
<h5 id="what-is-dirty-page">What is dirty page ?<a class="headerlink" href="#what-is-dirty-page" title="Permanent link"></a></h5>
<pre><code>   * When memory pages mapped to a file are edited by some process, those edited pages are called dirty pages
     until they are written to disk. In simpler words, Edited and uncommied memory pages are called dirty pages.
     Dirty pages are saved in page cache until they are written/commited to disk.

   * Dirty pages are periodically transferred (as well as with the system calls sync or fsync) to the underlying
     storage device.

   * Up to and including the 2.6.31 version of the Linux kernel, the pdflush threads ensured that dirty pages were
     periodically written to the underlying storage device.

   * Since pdflush had several performance disadvantages, Jens Axboe developed a new, more effective writeback
     mechanism for Linux Kernel version 2.6.32. This approach provides threads for each device attached to a server. 
     These threads are managed by a service called "flushd".
</code></pre>
<h3 id="memory-issue-related-investigation">Memory issue related Investigation:<a class="headerlink" href="#memory-issue-related-investigation" title="Permanent link"></a></h3>
<pre><code> 1. Review the output of free command:

    $ free -m 
                   total        used        free      shared  buff/cache   available
    Mem:           32106        3130       20774          11        8201       28448
    Swap:           1907          13        1894


 2. Review the SAR command output for continuously heavy Swap in/out activity. This is represented by high values
    of "pswpin" / "pswpout"

    Example of sar output :

    $ sar -W

        12:00:00 AM  pswpin/s pswpout/s 
        05:20:00 AM  0.21      0.00 
        05:30:00 AM  0.08      0.85 
        05:40:00 AM  0.47      0.00 
        05:50:00 AM  3.58      1.71 
        06:00:00 AM  2.48      0.00 
        06:10:00 AM 39.91      7.17   &lt;&lt;&lt;&lt;----- High swap-in and swap-out detected 
        06:20:00 AM  0.21      2.72 
        06:30:00 AM 13.30      1.04

      Or you can check these stats using below command, the si/so section to check swapin/swapout.:

      $ vmstat

      procs   -----------memory----------    ---swap--     -----io----      -system--       ------cpu-----
      r  b     swpd   free   buff  cache      si   so      bi    bo          in   cs        us sy id wa st
      1  0   62208 21707724 694072 7281500     0    0       1    29            1    1         1  1 98  0  0

 3. Check the number of major page fault happening on the server using below sar command. This suggests that CPU
    is mostly busy fetching files from disk/swap rather than serving actual processes.

    $ sar -B

        05:20:10 PM  pgpgin/s pgpgout/s   fault/s  majflt/s  pgfree/s pgscank/s pgscand/s pgsteal/s    %vmeff
        05:30:10 PM      0.00    232.94   1502.78      0.00   1296.10      0.00      0.00      0.00      0.00
        05:40:10 PM      0.00    624.97   123624.06  123035    682.68      0.00      0.00      0.00      0.00 &lt;&lt;&lt;--- High major faults
        05:50:10 PM      0.00    130.77    229.73    121873    238.82      0.00      0.00      0.00      0.00 &lt;&lt;&lt;--- High major faults
        06:00:08 PM      0.05    361.87    303.89      0.00    367.08      0.00      0.00      0.00      0.00


 4. Check the kbdirty value in below command output.

    =&gt; kbdirty: Amount of memory in kilobytes waiting to get written back to the disk. If this value is very high,
                It means either there is something wrong with pdflush/flushd service or CPU is unable to write 
                changed pages(dirty pages) back to disk with expected speed. Now you will have to check the disk
                performance which we will discuss in detail in our next topic.

  05:20:10 PM kbmemfree   kbavail kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit  kbactive   kbinact   kbdirty
  05:30:10 PM  21267192  29123732   3075004      9.35    716156   7213396   9264428     26.60   4503104   6166304       252
  05:40:10 PM  21286860  29144116   3054432      9.29    716524   7213628   9359668     26.87   4481716   6173528       772
  05:50:10 PM  21279032  29136796   3061676      9.31    716684   7213984   9265528     26.60   4506340   6178268       436
  06:00:08 PM  21266616  29125040   3073608      9.35    717036   7214472   9254568     26.57   4508936   6169368      1368


 5. Tune vm.swappiness kernel parameter:

    Depending on your System's usage and high swap-in and swap-outs on your system, you can lower the value of
    vm.swappiness kernel parameter accordingly.

    For high Memory centric applications like Databases, Please try to keep the vm.swappiness as low as possible,
    somewhere between 5 to 10.

      $ cat /proc/sys/vm/swappiness
        60

      =&gt; open /etc/sysctl.conf as root. Then, change or add this line to the file:
          vm.swappiness = 10

      =&gt; for changing the swappiness value temporarily try this command:
            $ echo 50 &gt; /proc/sys/vm/swappiness

    A value of 0 does not prevent swap. In fact, the kernel will initiate swap when the amount of free and
    file-backed pages is less than the high water mark in a zone irrespective of the swappiness value.
</code></pre>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5000366982270064"
     crossorigin="anonymous"></script>
<!-- horizontal -->
<p><ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-5000366982270064"
     data-ad-slot="5166053770"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h1 id="troubleshooting-linux-performance-issue-happening-due-to-high-disk-io-usage">Troubleshooting Linux performance issue happening due to high Disk IO Usage<a class="headerlink" href="#troubleshooting-linux-performance-issue-happening-due-to-high-disk-io-usage" title="Permanent link"></a></h1>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5000366982270064"
     crossorigin="anonymous"></script>
<!-- horizontal -->
<p><ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-5000366982270064"
     data-ad-slot="5166053770"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h1 id="troubleshooting-linux-os-network-performance-issues">Troubleshooting Linux OS network performance Issues<a class="headerlink" href="#troubleshooting-linux-os-network-performance-issues" title="Permanent link"></a></h1>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5000366982270064"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-5000366982270064"
     data-ad-slot="3808191339"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<hr />
<p><br></p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5000366982270064"
     crossorigin="anonymous"></script>
<!-- horizontal -->
<p><ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-5000366982270064"
     data-ad-slot="5166053770"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<hr />
<p>You may also refer to below articles:</p>
<ul>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/linux_basic/>Linux Interview Questions for Freshers</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/linux_interview_questions_for_freshers/>Linux Interview Questions for Freshers - 2</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/linux_L1/>Linux Interview Questions for Freshers and Experienced - L1</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/linux_L2/>Linux Interview Questions for Experienced Linux Admins - L2</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/linux_L3/ >Advanced Linux Interview Questions for Experienced Admins - L3</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/shell_scripting_interview_questions/ >Shell-Scripting interview questions</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/network/ >OS Network Interview Questions</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/aws/ >AWS Certified SysOps Administrator - Questions and Answers-1st</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/aws-2/ >AWS Certified SysOps Administrator - Questions and Answers-2nd</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/aws-3/ >AWS interview questions for experienced professionals - 1st</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/aws-4/ >AWS interview questions for experienced professionals - 2nd</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/ansible_interview_questions/ >Ansible interview questions</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/kubernetes_interview_questions/ >Kubernetes interview questions</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/devops_interview_questions/>DevOps Interview Questions for Freshers and Experienced</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/devops_interview_questions-2/ >DevOps Interview Questions for Freshers and Experienced - 2</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/git/>GIT Interview Questions for DevOps Roles</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/jenkins/>Jenkins Interview Questions for Experienced DevOps Engineer</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/terraform_interview_question/>Terraform Interview Questions for Experienced DevOps Engineer</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/terraform_interview_question-2/>Terraform Interview Questions for Experienced DevOps Engineer - 2</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/terraform_interview_question-3/>Terraform Interview Questions for Experienced DevOps Engineer - 3</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/java_interview_questions/>JAVA Interview Questions</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/java_interview_questions-2/>JAVA Interview Questions - 2</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/manual_testing_interview_questions/>Manual Testing Interview Questions for QA Engineers/Testers</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/dbms_interview_questions/>DBMS Interview Questions</a></li>
<li><a target="_blank" href=https://www.nightwolf.in/nightwolf-cotribution/managerial_interview_questions/ >Managerial interview questions</a></li>
</ul></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2022 nightWolf</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
